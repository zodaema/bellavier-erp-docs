# Routing System ‚Äî Authoritative Classification

> ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏´‡∏•‡πà‡∏á‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏´‡∏•‡∏±‡∏Å (single source of truth) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏¢‡∏Å Routing System ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏Å‡πà‡∏≤ (V1) ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å DAG Routing ‡∏£‡∏∏‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà (V2) ‡πÉ‡∏ô Bellavier ERP

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ú‡∏•‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Task 14.x ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏≤‡∏£ deprecate migration ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Master Schema V2

---

## 1. Routing V2 ‚Äî Active DAG Routing (KEEP)

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ä‡∏∏‡∏î‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö Routing ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á Bellavier ERP ‡∏£‡∏∏‡πà‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‡πÉ‡∏ä‡πâ‡πÇ‡∏î‡∏¢:
- DAG Graph Designer
- Behavior Engine
- Job Ticket / Work Queue
- QC Policy / Routing Versioning

**‡∏Å‡∏é:**
- ‡∏´‡πâ‡∏≤‡∏° mark ‡πÄ‡∏õ‡πá‡∏ô legacy
- ‡∏´‡πâ‡∏≤‡∏°‡∏¢‡πâ‡∏≤‡∏¢ migration ‡πÑ‡∏õ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå deprecated
- ‡∏´‡πâ‡∏≤‡∏° drop ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞ reset schema ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ master schema V2 ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 1:1 ‡πÄ‡∏™‡∏°‡∏≠

**‡∏ï‡∏≤‡∏£‡∏≤‡∏á V2 (DAG Routing):**
- `routing_graph`
- `routing_graph_draft`
- `routing_graph_version`
- `routing_graph_var`
- `routing_graph_favorite`
- `routing_graph_feature_flag`
- `routing_node`
- `routing_edge`
- `routing_set`
- `routing_step`
- `routing_audit_log`

> ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å dev DB ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡πÄ‡∏ä‡πà‡∏ô `bgerp_t_maison_atelier`) ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà prefix `routing_` ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï ‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÅ‡∏•‡∏∞ update ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

---

## 2. Routing V1 ‚Äî Legacy Routing System (DEPRECATE CANDIDATES)

Routing ‡∏£‡∏∏‡πà‡∏ô‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö (‡∏Å‡πà‡∏≠‡∏ô‡∏°‡∏µ DAG Designer) ‡∏°‡∏±‡∏Å‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ:
- ‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö routing ‡πÅ‡∏ö‡∏ö linear/simple (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà graph)
- ‡πÑ‡∏°‡πà‡∏°‡∏µ concept node/edge/graph_version
- ‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö work center ‡πÅ‡∏ö‡∏ö‡πÄ‡∏Å‡πà‡∏≤

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏°‡∏±‡∏Å‡∏û‡∏ö (‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏° / pattern ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á):**
- `routing` (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô schema ‡πÉ‡∏î)
- `routing_operation`
- `routing_process`
- `routing_task`
- `routing_template`
- `routing_step_old`

> NOTE: ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô pattern ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡πÉ‡∏ô Task 14.0-A ‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á scan schema ‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ú‡∏•‡∏•‡∏á `task14_inventory.md` ‡∏ß‡πà‡∏≤‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞ tenant ‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏î‡∏ö‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç Legacy Routing

**‡∏Å‡∏é‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Routing V1:**
- ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ mark ‡πÄ‡∏õ‡πá‡∏ô legacy ‡πÅ‡∏•‡∏∞‡∏¢‡πâ‡∏≤‡∏¢ migration ‡πÑ‡∏õ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `*_deprecated/` ‡πÑ‡∏î‡πâ
- ‡∏´‡πâ‡∏≤‡∏° drop table ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏ô production (‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö manual + ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)
- UI / API ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ Routing V1 ‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏π‡∏Å mark ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô Legacy UI ‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÅ‡∏ú‡∏ô decommission ‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å

---

## 3. Guideline ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö AI Agent / Dev Tools

‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Task ‡∏´‡∏£‡∏∑‡∏≠ Script ‡πÉ‡∏î ‡πÜ ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á prefix `routing_` ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

1. **‡∏´‡πâ‡∏≤‡∏°‡∏™‡∏£‡∏∏‡∏õ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ß‡πà‡∏≤ `routing_*` ‡∏Ñ‡∏∑‡∏≠ Legacy ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î**
   - ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Routing V2 ‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

2. **‡∏ñ‡πâ‡∏≤‡∏û‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà prefix `routing_`**
   - ‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ß‡πà‡∏≤: ‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö Graph Designer / DAG / Job Ticket ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
   - ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πà ‚Üí ‡∏à‡∏±‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏° V2 ‡πÅ‡∏•‡∏∞ update ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ
   - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á Routing V1 ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡πá‡∏ô module ‡πÉ‡∏´‡∏°‡πà

3. **‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥ Blueprint Cleanup (Task 14.x)**
   - ‡πÉ‡∏´‡πâ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏ã‡∏Å‡∏ä‡∏±‡∏ô "Routing V2" ‡πÄ‡∏õ‡πá‡∏ô core schema ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö
   - Routing V1 ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ô Task 14.x ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏£‡∏≠‡∏á (‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å confirm ‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß)

---

## 4. Relation ‡∏Å‡∏±‡∏ö Task 14.0

Task 14.0 ‡πÅ‡∏•‡∏∞ task 14.x ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ:

- Phase 14.0-A ‚Äî Inventory & Classification
  - ‡πÉ‡∏ä‡πâ list Routing V2/V1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô migration

- Phase 14.0-B ‚Äî Blueprint Refactor
  - Master Schema V2 ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á **‡πÄ‡∏â‡∏û‡∏≤‡∏∞** Routing V2 ‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ 1
  - Migration ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á Routing V1 ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ `*_deprecated/` ‡πÑ‡∏î‡πâ

- Phase 14.0-C ‚Äî Tenant Bootstrap
  - Tenant ‡πÉ‡∏´‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Routing V2 ‡πÉ‡∏ô schema ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á Routing V1 ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å

---

> ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏ö/‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á routing ‡πÉ‡∏î ‡πÜ ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á `routing_classification.md` ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÅ‡∏Å‡πâ Task / Migration ‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡∏ï‡∏≤‡∏° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Blueprint ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏±‡∏ö‡∏™‡∏ô‡∏≠‡∏µ‡∏Å

---

# Task 14.0 ‚Äî Master Blueprint Cleanup & Legacy Schema Purge
**Phase 1.0 of System Master Data Hardening / Material Pipeline Readiness**

---

## üéØ Objective

‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î "Blueprint ‡∏´‡∏•‡∏±‡∏Å" ‡∏Ç‡∏≠‡∏á Database (migration + schema) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Bellavier ERP ‡∏°‡∏µ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô, ‡πÑ‡∏°‡πà‡∏°‡∏µ Legacy tables ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡∏õ‡∏ô, ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ deploy ‡∏Ç‡∏∂‡πâ‡∏ô‡πÇ‡∏Æ‡∏™‡∏ï‡πå‡∏à‡∏£‡∏¥‡∏á / ‡∏™‡∏£‡πâ‡∏≤‡∏á tenant ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á Legacy ‡∏ã‡πâ‡∏≥‡∏≠‡∏µ‡∏Å

‡∏™‡∏£‡∏∏‡∏õ‡∏á‡πà‡∏≤‡∏¢ ‡πÜ:
> ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà Task 14.0 ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡πÑ‡∏õ **‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á uom / work_centers / product_categories / material_categories / stock_item / product / ‡∏Ø‡∏•‡∏Ø ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡∏à‡∏≤‡∏Å migration blueprint ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ**

---

## üìå Background

‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô codebase ‡∏Ç‡∏≠‡∏á Bellavier ERP ‡∏°‡∏µ "‡∏™‡∏≠‡∏á‡∏¢‡∏∏‡∏Ñ" ‡∏Ç‡∏≠‡∏á schema ‡∏≠‡∏¢‡∏π‡πà‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô:

- ‡∏¢‡∏∏‡∏Ñ V1 (Legacy):
  - ‡∏ï‡∏≤‡∏£‡∏≤‡∏á: `uom`, `work_centers`, `product_categories`, `material_categories`, `stock_item`, `product`, `product_detail`, `bom_line` ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏Å‡πà‡∏≤ ‡∏Ø‡∏•‡∏Ø
  - ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏∏‡πà‡∏ô‡πÅ‡∏£‡∏Å (‡∏Å‡πà‡∏≠‡∏ô TenantApiBootstrap / DAG / Material Hybrid-C)

- ‡∏¢‡∏∏‡∏Ñ V2 (Current Core):
  - ‡∏ï‡∏≤‡∏£‡∏≤‡∏á: `unit_of_measure`, `work_center`, `warehouse`, `warehouse_location`, `material`, `material_lot`, `material_sheet` (‡∏´‡∏£‡∏∑‡∏≠ pipeline ‡πÉ‡∏´‡∏°‡πà), `stock_ledger`, `dag_*`, `job_ticket`, `work_queue` ‡∏Ø‡∏•‡∏Ø
  - ‡πÉ‡∏ä‡πâ‡πÇ‡∏î‡∏¢ UI ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô, DAG, GRN Leather, CUT Behavior, ‡∏Ø‡∏•‡∏Ø

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- tenant DB ‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡∏°‡πà‡∏õ‡∏∞‡∏õ‡∏ô‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà
- migration blueprint (‡πÉ‡∏ô `database/migrations` ‡πÅ‡∏•‡∏∞ `database/tenant_migrations`) ‡∏¢‡∏±‡∏á‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á Legacy ‡∏≠‡∏¢‡∏π‡πà
- ‡∏ñ‡πâ‡∏≤ deploy ‡∏Ç‡∏∂‡πâ‡∏ô‡πÇ‡∏Æ‡∏™‡∏ï‡πå / ‡∏™‡∏£‡πâ‡∏≤‡∏á tenant ‡πÉ‡∏´‡∏°‡πà ‚Üí migration ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á Legacy ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏≠‡∏µ‡∏Å
- ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Master Data ‡∏™‡∏Å‡∏õ‡∏£‡∏Å, ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏ú‡∏¥‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á, ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô Phase 13.18+ ‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£

Task 14.0 = ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô "‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏ç‡πà" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏µ schema ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á

---

## üß≠ Scope

### In Scope
- ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå migration blueprint ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ó‡∏±‡πâ‡∏á global + tenant)
- ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á Legacy V1 ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å blueprint
- ‡∏™‡∏£‡πâ‡∏≤‡∏á "Master Schema Migration" ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö V2
- ‡∏ß‡∏≤‡∏á‡∏Å‡∏•‡πÑ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ Legacy tables ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô tenant ‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å
- ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á reset / bootstrap tenant ‡πÉ‡∏´‡∏°‡πà (dev, staging, prod)

### Out of Scope (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Task 14.0)
- ‡∏Å‡∏≤‡∏£ migrate ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å Legacy tables ‚Üí V2 (‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏ô Task ‡πÅ‡∏¢‡∏Å ‡πÄ‡∏ä‡πà‡∏ô 14.1‚Äì14.3 ‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
- ‡∏Å‡∏≤‡∏£ drop ‡∏ï‡∏≤‡∏£‡∏≤‡∏á Legacy ‡πÉ‡∏ô production ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö manual + step-by-step ‡∏´‡∏•‡∏±‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö)

---

## üß± High-level Plan

### Phase 14.0-A ‚Äî Inventory & Classification

1. **Scan migration ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î**
   - `database/migrations/*.php`
   - `database/tenant_migrations/*.php`

2. **‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏∏‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á** ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á / ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô migration:
   - ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á V2 (‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á):
     - `unit_of_measure`, `work_center`, `warehouse`, `warehouse_location`
     - `material`, `material_lot`, `material_sheet` (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ), `stock_ledger`
     - DAG / Work Queue / Job Ticket / QC tables
     - User / Role / Permission / Tenant tables
   - ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á V1 (Legacy):
     - `uom`, `work_centers`, `product_categories`, `material_categories`
     - `stock_item`, `product`, `product_detail`, `product_variant`
     - `bom_line` ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏Å‡πà‡∏≤, `product_bom` ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏Å‡πà‡∏≤ ‡∏Ø‡∏•‡∏Ø

3. ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ú‡∏•‡∏™‡∏£‡∏∏‡∏õ‡∏•‡∏á `docs/dag/tasks/task14_inventory.md`:
   - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ migration ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö V1
   - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ migration ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö V2
   - ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á V1/V2 (‡πÉ‡∏ä‡πâ mapping ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡πà‡∏≤‡∏ß ‡πÜ)

---

### Phase 14.0-B ‚Äî Blueprint Refactor (Schema Level)

‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÉ‡∏´‡πâ‡∏°‡∏µ "‡πÅ‡∏ú‡∏ô‡πÅ‡∏°‡πà‡∏ö‡∏ó" schema V2 ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö tenant ‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡∏∞ migration ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á V1 ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï

1. **‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå Master Schema Migration ‡πÉ‡∏´‡∏°‡πà**
   - ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠: `database/tenant_migrations/2025_14_master_schema_v2.php`
   - ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:
     - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á V2 ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
     - ‡πÑ‡∏°‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á Legacy ‡∏ó‡∏∏‡∏Å‡∏ä‡∏ô‡∏¥‡∏î (uom, work_centers, stock_item, product, ‡∏Ø‡∏•‡∏Ø)
   - ‡∏ï‡πâ‡∏≠‡∏á idempotent (‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á)

2. **Mark Legacy Migrations as Deprecated**
   - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `docs/dag/tasks/task14_deprecated_migrations.md` ‡∏£‡∏∞‡∏ö‡∏∏:
     - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏ü‡∏•‡πå migration V1 ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤ deprecated
     - ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏ñ‡∏π‡∏Å‡∏£‡∏±‡∏ô‡∏Å‡∏±‡∏ö tenant ‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ
   - ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå migration V1 ‡πÑ‡∏õ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå:
     - `database/migrations_deprecated/`
     - `database/tenant_migrations_deprecated/`
   - ‡∏õ‡∏£‡∏±‡∏ö bootstrap script (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) ‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå deprecated

3. **Ensure No Implicit Legacy Creation**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏≠‡∏Å migration ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏°‡∏µ `CREATE TABLE`/`ALTER TABLE` ‡πÅ‡∏ö‡∏ö manual
   - ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ logic ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á V1 ‡πÉ‡∏ô runtime ‚Üí ‡∏¢‡πâ‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠ deprecate ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

4. **Critical Routing Classification Check**
   - ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á `docs/dag/routing_classification.md` ‡πÄ‡∏õ‡πá‡∏ô source ‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡πÅ‡∏ô‡∏Å Routing V1/V2
   - ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏ß‡πà‡∏≤ master schema V2 ‡∏à‡∏∞ **‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞** routing tables ‡∏ï‡∏≤‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏° V2 (DAG) ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
   - ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏£‡∏ß‡∏° prefix `routing_` ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô legacy ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ classification ‡∏ô‡∏µ‡πâ

---

### Phase 14.0-C ‚Äî Tenant Bootstrap Strategy

‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á tenant ‡πÉ‡∏´‡∏°‡πà / ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï dev environment ‡πÉ‡∏ä‡πâ schema ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

1. **‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Tenant Bootstrap Script**
   - ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: `tools/bootstrap_tenant.php` ‡∏´‡∏£‡∏∑‡∏≠ CLI script
   - ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:
     - ‡∏™‡∏£‡πâ‡∏≤‡∏á schema V2 ‡∏à‡∏≤‡∏Å `2025_14_master_schema_v2.php`
     - ‡∏£‡∏±‡∏ô System Default Seed (‡∏à‡∏≤‡∏Å Task 13.21)
     - ‡∏£‡∏±‡∏ô Seed ‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô (permissions, roles, defaults)

2. **‡∏Å‡∏≥‡∏´‡∏ô‡∏î Procedure ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Environment ‡∏ï‡πà‡∏≤‡∏á ‡πÜ**
   - Dev: ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ reset tenant ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á schema + data
   - Staging: reset ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ schema + seed master
   - Prod: ‡πÑ‡∏°‡πà reset data, ‡πÉ‡∏ä‡πâ blueprint ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö tenant ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï

3. ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÉ‡∏ô `docs/dag/tasks/task14_tenant_bootstrap.md` ‡∏ß‡πà‡∏≤:
   - ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á tenant ‡πÉ‡∏´‡∏°‡πà ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏î
   - ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞ reset dev tenant ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏ö‡∏≠‡∏∞‡πÑ‡∏£ / backup ‡∏≠‡∏∞‡πÑ‡∏£

---

## ‚ö† Risk & Mitigation

### Risk 1 ‚Äî ‡∏•‡∏ö/‡∏¢‡πâ‡∏≤‡∏¢ migration V1 ‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏≥‡πÉ‡∏´‡πâ tenant ‡πÄ‡∏Å‡πà‡∏≤‡∏£‡∏±‡∏ô migration ‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå:**
- tenant ‡πÄ‡∏Å‡πà‡∏≤‡∏ö‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏Ñ‡∏¢‡∏û‡∏∂‡πà‡∏á‡∏û‡∏≤ migration V1 ‡∏≠‡∏¢‡∏π‡πà ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ `uom`/`work_centers`
- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏õ `*_deprecated/` ‡πÅ‡∏•‡πâ‡∏ß script migrate ‡∏≠‡∏≤‡∏à‡∏´‡∏≤‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠

**Mitigation:**
- ‡πÅ‡∏¢‡∏Å "‡∏ä‡∏∏‡∏î migration" ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö tenant ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏±‡∏ö tenant ‡πÉ‡∏´‡∏°‡πà:
  - Tenant ‡πÉ‡∏´‡∏°‡πà: ‡πÉ‡∏ä‡πâ `master_schema_v2` + seed ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
  - Tenant ‡πÄ‡∏î‡∏¥‡∏°: ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏ú‡πà‡∏≤‡∏ô phase migration ‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô file ‡∏ä‡∏∏‡∏î‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏µ‡∏Å
- ‡∏õ‡∏£‡∏±‡∏ö bootstrap script ‡∏Ç‡∏≠‡∏á migration ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏Å‡∏£‡∏ì‡∏µ:
  - ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ `tenant_migrations` record ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‚Üí ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏Å‡πà‡∏≤

---

### Risk 2 ‚Äî Code ‡∏¢‡∏±‡∏á‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏ï‡∏≤‡∏£‡∏≤‡∏á Legacy ‡∏≠‡∏¢‡∏π‡πà

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå:**
- ‡∏ö‡∏≤‡∏á module ‡πÄ‡∏Å‡πà‡∏≤‡∏¢‡∏±‡∏á refer ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `uom`, `work_centers`, `stock_item`, `product` ‡∏Ø‡∏•‡∏Ø
  - ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤ UOM ‡πÄ‡∏î‡∏¥‡∏° (‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `uom`) ‡πÅ‡∏•‡∏∞ Routing UI ‡πÄ‡∏î‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á Routing V1 ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏ô `routing_classification.md` ‚Äî ‡∏ï‡πâ‡∏≠‡∏á mark ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô Legacy UI ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Å‡πà‡∏≠‡∏ô

**Mitigation:**
- ‡∏ó‡∏≥ code search ‡∏ó‡∏±‡πà‡∏ß repo ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠ table Legacy ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ `task14_legacy_code_refs.md`
- Mark ‡∏ß‡πà‡∏≤ module ‡πÑ‡∏´‡∏ô‡∏ï‡πâ‡∏≠‡∏á rewrite ‡∏´‡∏£‡∏∑‡∏≠ deprecate ‡πÉ‡∏ô Task 14.x ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
- ‡∏´‡πâ‡∏≤‡∏°‡∏•‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á Legacy ‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡πÉ‡∏ô prod ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞ confirm ‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß

---

### Risk 3 ‚Äî Schema V2 ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô DB

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå:**
- Master Schema V2 ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á dev DB ‡∏à‡∏£‡∏¥‡∏á

**Mitigation:**
- ‡πÉ‡∏ä‡πâ schema dump (‡πÄ‡∏ä‡πà‡∏ô `schema_raw_dump.md` ‡∏à‡∏≤‡∏Å Task 13.15) ‡πÄ‡∏õ‡πá‡∏ô base
- ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö Master Schema V2 ‡∏Å‡∏±‡∏ö dev DB ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- ‡πÅ‡∏Å‡πâ Master Migration ‡πÉ‡∏´‡πâ match ‡∏Å‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

---

## ‚úÖ Acceptance Criteria

1. **Blueprint Cleanliness**
   - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå migration ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á V1 (uom, work_centers, stock_item, product ‡∏Ø‡∏•‡∏Ø)
   - ‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå master schema V2 ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö tenant ‡πÉ‡∏´‡∏°‡πà

2. **Tenant Bootstrap**
   - ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á tenant ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å script ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡πÅ‡∏ï‡πà schema V2
   - tenant ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á Legacy ‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô DB

3. **Documentation**
   - `task14_inventory.md` ‚Äî ‡πÅ‡∏™‡∏î‡∏á mapping V1/V2 ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ migration ‡πÄ‡∏î‡∏¥‡∏°
   - `task14_deprecated_migrations.md` ‚Äî ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏ü‡∏•‡πå migration ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤ deprecated
   - `task14_tenant_bootstrap.md` ‚Äî ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á/‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï tenant

4. **Safety**
   - tenant ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡πÄ‡∏ä‡πà‡∏ô `maison_atelier`) ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏•‡∏±‡∏á Task 14.0
   - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£ drop ‡∏ï‡∏≤‡∏£‡∏≤‡∏á Legacy ‡πÉ‡∏ô prod ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å migration ‡∏ä‡∏∏‡∏î‡∏ô‡∏µ‡πâ (‡∏ï‡πâ‡∏≠‡∏á manual + ‡πÅ‡∏¢‡∏Å Task)

---

## üöÄ Next Steps After Task 14.0

- **Task 14.1‚Äì14.3** ‚Äî ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£: Data migration ‡∏à‡∏≤‡∏Å V1 ‚Üí V2 (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
- **Task 15.x** ‚Äî Focus ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà Material Pipeline / CUT / GRN / BOM ‡∏ö‡∏ô schema ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£

Task 14.0 ‡∏Ñ‡∏∑‡∏≠‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ Bellavier ERP ‡∏à‡∏≤‡∏Å "‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏ï‡πà‡∏≠ Lego ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏∏‡πà‡∏ô" ‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏°‡∏µ **Blueprint ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß, Clean, ‡πÅ‡∏•‡∏∞ Deploy ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à**.