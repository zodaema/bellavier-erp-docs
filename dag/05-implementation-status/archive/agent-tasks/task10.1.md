# Task 10.1 ‚Äì Patch Operator Availability Integration (People Monitor)

**Type:** Patch / Refactor Prompt  
**Depends on:** Task 10 ‚Äì Operator Availability Console & Enforcement Flag  
**Status:** TODO

## üéØ Objective

‡∏£‡∏µ‡πÅ‡∏û‡∏ó‡∏ä‡πå‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å Task 10 ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏£‡∏¥‡∏á:

1. **‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Operator Availability ‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å** (‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô Task 10)
2. **‡∏ú‡∏π‡∏Å Operator Availability API + Flag** ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö **People tab (People Monitor)** ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ `manager_assignment` ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
3. **‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô UI ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á People tab**:
   - layout, column, ‡∏õ‡∏∏‡πà‡∏°, copy ‡πÄ‡∏î‡∏¥‡∏° ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
   - ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡πâ ‚Äú‡∏™‡∏≠‡∏î‡πÅ‡∏ó‡∏£‡∏Å‚Äù logic ‡∏´‡∏£‡∏∑‡∏≠ UI ‡πÄ‡∏™‡∏£‡∏¥‡∏°‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢

---

## üß± Scope

### 1) Files / Logic ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á ‚Äú‡∏Ñ‡∏á‡πÑ‡∏ß‡πâ‚Äù

‡∏´‡πâ‡∏≤‡∏°‡∏•‡∏ö / ‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏Å‡πâ behavior ‡∏´‡∏•‡∏±‡∏Å (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠ bugfix):

- `source/BGERP/Service/AssignmentEngine.php`
  - ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á logic `FF_HAT_ENFORCE_AVAILABILITY` ‡πÅ‡∏•‡∏∞ `filterAvailable()`
- `source/hatthasilpa_operator_api.php`
- `tests/Integration/HatthasilpaOperatorAvailabilityTest.php`
- `tests/Integration/HatthasilpaE2E_SerialEnforcementStage2Test.php`
- `tests/Unit/SerialHealthServiceTest.php`
- ‡πÇ‡∏Ñ‡∏£‡∏á feature flag service ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

### 2) Files ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á ‚Äú‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á‚Äù

‡∏´‡∏ô‡πâ‡∏≤ Operator Availability ‡πÅ‡∏ö‡∏ö stand-alone ‡∏ó‡∏µ‡πà Task 10 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ **‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏î‡∏ü‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏™‡∏±‡∏ö‡∏™‡∏ô:

- `page/hatthasilpa_operator_availability.php`
- `views/hatthasilpa_operator_availability.php`
- `assets/javascripts/hatthasilpa/operator_availability.js`

‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á:

- Routing / menu entry ‡πÉ‡∏î ‡πÜ ‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏ñ‡∏∂‡∏á `hatthasilpa_operator_availability`
  - ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡πÉ‡∏ô `index.php` ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏ü‡∏•‡πå router ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ `case 'hatthasilpa_operator_availability': ...` ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á
- ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ asset registration (‡πÄ‡∏ä‡πà‡∏ô enqueue JS/CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö page ‡∏ô‡∏µ‡πâ) ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á‡∏î‡πâ‡∏ß‡∏¢

> ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤: ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å Task 10.1 ‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ page ‡πÅ‡∏¢‡∏Å‡∏ä‡∏∑‡πà‡∏≠ `hatthasilpa_operator_availability` ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏µ‡∏Å‡πÅ‡∏•‡πâ‡∏ß

---

## üë• People Monitor Integration

### ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î

‡πÉ‡∏ä‡πâ **People tab ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ `manager_assignment`** ‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏π‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Operator Availability ‡πÇ‡∏î‡∏¢:

- ‡πÉ‡∏ä‡πâ **API ‡∏à‡∏≤‡∏Å `hatthasilpa_operator_api.php`**
- ‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤ People tab:
  - ‡πÅ‡∏™‡∏î‡∏á **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ availability ‡∏à‡∏£‡∏¥‡∏á** ‡∏à‡∏≤‡∏Å table `operator_availability`
  - ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏î‡πâ (‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏∏‡πà‡∏°/‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô Actions column ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
- ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ **‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô UI ‡πÄ‡∏î‡∏¥‡∏°** (‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô layout, label, column order, icon ‡πÄ‡∏î‡∏¥‡∏°)  
  ‚Üí ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ logic ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á ‡πÅ‡∏•‡∏∞ interaction ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ perception ‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ

### ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà Agent ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥

1. **‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÑ‡∏ü‡∏•‡πå People tab**
   - ‡πÉ‡∏ä‡πâ text search ‡∏´‡∏≤:
     - heading ‡πÄ‡∏ä‡πà‡∏ô `"People Monitor"` ‡∏´‡∏£‡∏∑‡∏≠ `"People"` tab
     - column ‡∏ä‡∏∑‡πà‡∏≠ `Member`, `Teams`, `Status`, `Workload`, `Current Work`, `Actions`
   - ‡∏õ‡∏Å‡∏ï‡∏¥‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡∏∏‡∏î:
     - view: something like `views/manager_assignment_*.php`
     - JS: something like `assets/javascripts/manager_assignment/*.js`

2. **‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° API ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö People tab**

   #### 2.1 ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• availability

   - ‡πÉ‡∏ô JS ‡∏Ç‡∏≠‡∏á People tab (‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏´‡∏•‡∏î list member ‡πÅ‡∏•‡πâ‡∏ß):
     - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `GET source/hatthasilpa_operator_api.php?action=get_operator_availability`
     - ‡∏£‡∏±‡∏ö `operators[]` ‡∏ó‡∏µ‡πà‡∏°‡∏µ field ‡πÄ‡∏ä‡πà‡∏ô `id_member`, `is_available`, `unavailable_until`
   - ‡∏ó‡∏≥ mapping:
     - ‡πÉ‡∏ä‡πâ `id_member` ‡∏´‡∏£‡∏∑‡∏≠ identifier ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° match ‡∏Å‡∏±‡∏ö member row ‡πÉ‡∏ô People table
   - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞ row ‡∏Ç‡∏≠‡∏á member:
     - ‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô API ‚Üí ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ `is_available` / `unavailable_until` ‡∏°‡∏≤‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‚Äú‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡∏£‡∏¥‡∏á‚Äù
     - ‡∏ñ‡πâ‡∏≤ **‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•** ‚Üí fail-open: ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤ ‚ÄúAvailable‚Äù (‡∏´‡∏£‡∏∑‡∏≠ fallback ‡∏ï‡∏≤‡∏° behavior ‡πÄ‡∏î‡∏¥‡∏°)

   > ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á API ‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á **‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤ error** ‡∏ñ‡πâ‡∏≤ API ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß  
   > - ‡∏ñ‡πâ‡∏≤ request fail ‚Üí log warning (console) ‡πÅ‡∏•‡πâ‡∏ß fallback ‡πÄ‡∏õ‡πá‡∏ô behavior ‡πÄ‡∏î‡∏¥‡∏°

   #### 2.2 ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡πà‡∏≤‡∏ô Actions

   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÉ‡∏ô Actions column ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° / ‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
     - ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ toggle ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‚Üí ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡∏Å event ‡∏Å‡∏±‡∏ö `update_operator_availability`
     - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‚Üí ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏° toggle ‡πÄ‡∏•‡πá‡∏Å ‡πÜ ‚Äú‡πÄ‡∏™‡∏£‡∏¥‡∏°‚Äù ‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà:
       - ‡∏´‡πâ‡∏≤‡∏°‡∏ó‡∏≥‡πÉ‡∏´‡πâ layout ‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß
       - ‡∏´‡πâ‡∏≤‡∏°‡∏•‡∏ö/‡∏¢‡πâ‡∏≤‡∏¢‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏¥‡∏°
   - ‡πÄ‡∏°‡∏∑‡πà‡∏≠ user ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:
     - ‡∏™‡πà‡∏á `POST` ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `source/hatthasilpa_operator_api.php`:
       - `action=update_operator_availability`
       - `id_member` ‡∏ï‡∏≤‡∏° row
       - `is_available` ‡πÄ‡∏õ‡πá‡∏ô 0/1 ‡∏ï‡∏≤‡∏° toggle
       - `unavailable_until`:
         - ‡∏£‡∏∞‡∏¢‡∏∞‡∏™‡∏±‡πâ‡∏ô‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô `null` ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô
         - ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤ ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡πÉ‡∏ô‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏™‡∏£‡∏¥‡∏° (overlay) ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÅ‡∏Å‡πâ UI ‡∏´‡∏•‡∏±‡∏Å
     - ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å update ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:
       - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï badge / status ‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ß‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
       - (optional) refresh availability ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏à‡∏≤‡∏Å API ‡πÄ‡∏û‡∏∑‡πà‡∏≠ sync

3. **‡∏£‡∏±‡∏Å‡∏©‡∏≤ UI ‡πÄ‡∏î‡∏¥‡∏° 100%**

- ‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏Å‡πâ:
  - ‡∏ä‡∏∑‡πà‡∏≠ tab: ‚ÄúPeople‚Äù
  - ‡∏ä‡∏∑‡πà‡∏≠ column ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
  - icon, badge style, ‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á status/workload ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
  - layout ‡∏Ç‡∏≠‡∏á header filter: Team, Status, Search, checkbox ‚ÄúInclude Supervisors‚Äù, etc.
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞:
  - Binding ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å API ‡πÉ‡∏´‡πâ status column ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏à‡∏£‡∏¥‡∏á
  - Interaction ‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏°/‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏õ‡πá‡∏ô dummy ‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á
  - UI ‡πÄ‡∏™‡∏£‡∏¥‡∏°‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô tooltip ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ ‚ÄúSynced with Availability Engine‚Äù) ‡πÇ‡∏î‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏£‡∏ö‡∏Å‡∏ß‡∏ô design ‡∏´‡∏•‡∏±‡∏Å

---

## üß™ Tests & Validation

### 1) PHPUnit

‡∏´‡∏•‡∏±‡∏á patch ‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô‡∏ä‡∏∏‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏´‡πâ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:

```bash
# Serial Health + Enforcement
vendor/bin/phpunit tests/Unit/SerialHealthServiceTest.php --testdox
vendor/bin/phpunit tests/Integration/HatthasilpaE2E_SerialEnforcementStage2Test.php --testdox

# Operator Availability
vendor/bin/phpunit tests/Integration/HatthasilpaOperatorAvailabilityTest.php --testdox

Expected:
	‚Ä¢	‡∏ó‡∏∏‡∏Å‡πÑ‡∏ü‡∏•‡πå OK (‡πÑ‡∏°‡πà‡∏°‡∏µ failures / errors)

2) Manual Acceptance
	1.	‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤
	‚Ä¢	‡πÑ‡∏°‡πà‡∏°‡∏µ route/page ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠ hatthasilpa_operator_availability ‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏à‡∏≤‡∏Å UI/URL ‡∏õ‡∏Å‡∏ï‡∏¥
	‚Ä¢	‡∏Ñ‡πâ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£ include/require/view ‡∏ñ‡∏∂‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á
	2.	People Monitor Behavior
	‚Ä¢	‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ manager_assignment ‚Üí tab People
	‚Ä¢	Layout ‡∏¢‡∏±‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏∏‡∏Å pixel (‡πÄ‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°)
	‚Ä¢	‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á Operator:
	‚Ä¢	‡∏ñ‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô operator_availability (is_available=0) ‚Üí status ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á
	‚Ä¢	‡∏ñ‡πâ‡∏≤ is_available=1 ‚Üí ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡πà‡∏≤‡∏á
	‚Ä¢	‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ row ‡πÉ‡∏ô operator_availability ‚Üí fallback ‡∏ï‡∏≤‡∏° behavior ‡πÄ‡∏î‡∏¥‡∏° (‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤ available)
	‚Ä¢	‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° / toggle ‡πÉ‡∏ô Actions:
	‚Ä¢	‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô operator_availability ‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô DB
	‚Ä¢	Refresh ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß status ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ
	3.	Enforcement Behavior (Smoke Test)
	‚Ä¢	‡πÄ‡∏°‡∏∑‡πà‡∏≠ FF_HAT_ENFORCE_AVAILABILITY = 1:
	‚Ä¢	Operator ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡πâ‡∏á is_available=0 ‡∏´‡∏£‡∏∑‡∏≠ unavailable_until ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‚Üí ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏î‡∏¢ AssignmentEngine
	‚Ä¢	‡πÄ‡∏°‡∏∑‡πà‡∏≠ FF_HAT_ENFORCE_AVAILABILITY = 0:
	‚Ä¢	Behavior ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î flag (fail-open, ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö Engine)

‚∏ª

üìå Notes for Agent
	‚Ä¢	‡∏´‡πâ‡∏≤‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå page ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Operator Availability
	‚Ä¢	‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏Å‡πâ AssignmentEngine ‡∏´‡∏£‡∏∑‡∏≠ API/Tests ‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏ö bug ‡∏à‡∏£‡∏¥‡∏á
	‚Ä¢	‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏Å‡∏Ñ‡∏∑‡∏≠:
	‚Ä¢	‡∏•‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô
	‚Ä¢	‡∏¢‡πâ‡∏≤‡∏¢/‡∏ú‡∏π‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÑ‡∏õ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô People tab ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
	‚Ä¢	‡∏ó‡∏≥‡πÉ‡∏´‡πâ Manager ‡πÉ‡∏ä‡πâ People Monitor ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Availability