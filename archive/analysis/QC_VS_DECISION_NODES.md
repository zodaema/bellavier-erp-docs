# QC Nodes vs Decision Nodes - Analysis

**Date:** November 14, 2025  
**Purpose:** ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á QC ‡πÅ‡∏•‡∏∞ Decision nodes

---

## üéØ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢

### üì¶ QC Node (Quality Control) - ‡∏î‡πà‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û

**‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠:** ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô

**‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î:** 
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô ‚Üí ‡∏ñ‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô ‚Üí ‡πÑ‡∏õ‡∏ï‡πà‡∏≠
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô ‚Üí ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‚Üí ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (rework)

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á:**
```
‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à ‚Üí [QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û] ‚Üí ‡∏ñ‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô ‚Üí ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å
                              ‚Üì
                         ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô
                              ‚Üì
                    [‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç]
```

**‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Edge:**
- ‚úÖ **Pass Edge** (‡∏ú‡πà‡∏≤‡∏ô): ‡πÄ‡∏õ‡πá‡∏ô `normal` ‡∏´‡∏£‡∏∑‡∏≠ `conditional` ‚Üí ‡πÑ‡∏õ‡∏ï‡πà‡∏≠
- ‚ùå **Fail Edge** (‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô): ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô `rework` ‚Üí ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö:**
```
[‡πÄ‡∏¢‡πá‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à] ‚Üí [QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏£‡∏≠‡∏¢‡πÄ‡∏¢‡πá‡∏ö]
                    ‚îú‚îÄ [normal: ‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡πÅ‡∏û‡πá‡∏Ñ]
                    ‚îî‚îÄ [rework: ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏¢‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà]
```

**‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô:**
- Fail edge ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô `rework` ‚Üí ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ loop back ‡πÑ‡∏õ‡∏¢‡∏±‡∏á rework sink
- Pass edge ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡πá‡∏ô `normal` ‡πÑ‡∏î‡πâ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ condition)
- ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ default edge (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏µ‡πÅ‡∏Ñ‡πà pass/fail)

---

### üîÄ Decision Node - ‡∏à‡∏∏‡∏î‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à

**‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠:** ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡∏Å‡∏ó‡∏≤‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç (if/then)

**‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î:**
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç ‚Üí ‡∏ñ‡πâ‡∏≤‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç A ‚Üí ‡πÑ‡∏õ‡∏ó‡∏≤‡∏á A
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç ‚Üí ‡∏ñ‡πâ‡∏≤‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç B ‚Üí ‡πÑ‡∏õ‡∏ó‡∏≤‡∏á B
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÑ‡∏´‡∏ô match ‚Üí ‡πÑ‡∏õ‡∏ó‡∏≤‡∏á default

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á:**
```
‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à ‚Üí [Decision: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ] ‚Üí ‡∏™‡∏µ‡πÅ‡∏î‡∏á ‚Üí [‡πÅ‡∏û‡πá‡∏Ñ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏î‡∏á]
                              ‚îú‚îÄ ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô ‚Üí [‡πÅ‡∏û‡πá‡∏Ñ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô]
                              ‚îî‚îÄ [default] ‚Üí [‡πÅ‡∏û‡πá‡∏Ñ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡∏≤‡∏ß]
```

**‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Edge:**
- ‡∏ó‡∏∏‡∏Å edge ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô `conditional` ‡∏´‡∏£‡∏∑‡∏≠ `rework` (‡πÑ‡∏°‡πà‡∏°‡∏µ `normal`)
- ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ **default edge** (`is_default=true`) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö fallback

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö:**
```
[‡∏ï‡∏±‡∏î‡∏ú‡πâ‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à] ‚Üí [Decision: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î]
                    ‚îú‚îÄ [conditional: size=S] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î S]
                    ‚îú‚îÄ [conditional: size=M] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î M]
                    ‚îú‚îÄ [conditional: size=L] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î L]
                    ‚îî‚îÄ [conditional: default] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î M] (is_default=true)
```

**‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô:**
- ‡∏ó‡∏∏‡∏Å edge ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ condition (‡πÑ‡∏°‡πà‡∏°‡∏µ `normal` edge)
- ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ default edge ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ condition match
- ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö branching ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô (‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 2 ‡∏ó‡∏≤‡∏á)

---

## üîç ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÅ‡∏ö‡∏ö‡πÄ‡∏´‡πá‡∏ô‡∏†‡∏≤‡∏û

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 1: QC Node

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‡πÄ‡∏¢‡πá‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏£‡∏≠‡∏¢‡πÄ‡∏¢‡πá‡∏ö ‚îÇ  ‚Üê QC Node
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
   ‚îå‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ       ‚îÇ
   ‚ñº       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ‡∏ú‡πà‡∏≤‡∏ô  ‚îÇ ‚îÇ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô (rework)‚îÇ
‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚îÇ           ‚îÇ
   ‚ñº           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ‡πÅ‡∏û‡πá‡∏Ñ ‚îÇ   ‚îÇ‡πÄ‡∏¢‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Edge Types:**
- Pass: `normal` (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ condition)
- Fail: `rework` (loop back)

---

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 2: Decision Node

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‡∏ï‡∏±‡∏î‡∏ú‡πâ‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Decision: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‚îÇ  ‚Üê Decision Node
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
   ‚îå‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
   ‚ñº   ‚ñº   ‚ñº   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ‡πÅ‡∏î‡∏á ‚îÇ‚îÇ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‚îÇ‚îÇ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‚îÇ‚îÇdefault‚îÇ
‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò
   ‚îÇ     ‚îÇ     ‚îÇ     ‚îÇ
   ‚ñº     ‚ñº     ‚ñº     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ‡πÅ‡∏û‡πá‡∏Ñ‚îÇ‚îÇ‡πÅ‡∏û‡πá‡∏Ñ‚îÇ‚îÇ‡πÅ‡∏û‡πá‡∏Ñ‚îÇ‚îÇ‡πÅ‡∏û‡πá‡∏Ñ‚îÇ
‚îÇ‡πÅ‡∏î‡∏á ‚îÇ‚îÇ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‚îÇ‚îÇ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‚îÇ‚îÇ‡∏Ç‡∏≤‡∏ß‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Edge Types:**
- ‡∏ó‡∏∏‡∏Å edge: `conditional` (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ condition)
- Default edge: `is_default=true` (fallback)

---

## üí° ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏≠‡∏∞‡πÑ‡∏£?

### ‡πÉ‡∏ä‡πâ QC Node ‡πÄ‡∏°‡∏∑‡πà‡∏≠:

1. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û**
   ```
   [‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏£‡∏≠‡∏¢‡πÄ‡∏¢‡πá‡∏ö] ‚Üí ‡∏ú‡πà‡∏≤‡∏ô/‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô
   ```

2. **Pass/Fail ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢**
   ```
   [‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à] ‚Üí [QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö] ‚Üí ‡∏ú‡πà‡∏≤‡∏ô ‚Üí ‡πÑ‡∏õ‡∏ï‡πà‡∏≠
                                    ‚îî‚îÄ ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‚Üí ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö
   ```

3. **Fail ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô Rework**
   ```
   [QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö] ‚Üí ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‚Üí [‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç]
   ```

### ‡πÉ‡∏ä‡πâ Decision Node ‡πÄ‡∏°‡∏∑‡πà‡∏≠:

1. **‡πÅ‡∏ï‡∏Å‡∏ó‡∏≤‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á**
   ```
   [‡∏ï‡∏±‡∏î‡∏ú‡πâ‡∏≤] ‚Üí [Decision: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î] ‚Üí S/M/L/XL
   ```

2. **‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô**
   ```
   [‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à] ‚Üí [Decision: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á]
                      ‚îú‚îÄ ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç A ‚Üí ‡∏ó‡∏≤‡∏á A
                      ‚îú‚îÄ ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç B ‚Üí ‡∏ó‡∏≤‡∏á B
                      ‚îú‚îÄ ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç C ‚Üí ‡∏ó‡∏≤‡∏á C
                      ‚îî‚îÄ default ‚Üí ‡∏ó‡∏≤‡∏á D
   ```

3. **‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Default Fallback**
   ```
   [Decision: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ] ‚Üí ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Üí ‡πÉ‡∏ä‡πâ‡∏™‡∏µ default
   ```

---

## üéì ‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÜ

### QC Node = "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏ú‡πà‡∏≤‡∏ô/‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô"
- ‚úÖ ‡∏ú‡πà‡∏≤‡∏ô ‚Üí ‡πÑ‡∏õ‡∏ï‡πà‡∏≠
- ‚ùå ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‚Üí ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
- Pass edge: `normal` ‡πÑ‡∏î‡πâ
- Fail edge: `rework` ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

### Decision Node = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏≤‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç"
- ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç A ‚Üí ‡∏ó‡∏≤‡∏á A
- ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç B ‚Üí ‡∏ó‡∏≤‡∏á B
- ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç match ‚Üí ‡∏ó‡∏≤‡∏á default
- ‡∏ó‡∏∏‡∏Å edge: `conditional` ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ default edge

---

## üìù ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 1: QC Node - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≠‡∏¢‡πÄ‡∏¢‡πá‡∏ö

```
[‡πÄ‡∏¢‡πá‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à] 
    ‚Üì
[QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏£‡∏≠‡∏¢‡πÄ‡∏¢‡πá‡∏ö]
    ‚îú‚îÄ [normal: ‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡πÅ‡∏û‡πá‡∏Ñ]
    ‚îî‚îÄ [rework: ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏¢‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà]
```

**Edge Configuration:**
- Pass edge: `edge_type = 'normal'`, `edge_label = '‡∏ú‡πà‡∏≤‡∏ô'`
- Fail edge: `edge_type = 'rework'`, `edge_label = '‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô'`

---

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 2: Decision Node - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå:** ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏≤‡∏° order

```
[‡∏ï‡∏±‡∏î‡∏ú‡πâ‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à]
    ‚Üì
[Decision: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î]
    ‚îú‚îÄ [conditional: size='S'] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î S]
    ‚îú‚îÄ [conditional: size='M'] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î M]
    ‚îú‚îÄ [conditional: size='L'] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î L]
    ‚îî‚îÄ [conditional: default, is_default=true] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î M]
```

**Edge Configuration:**
- ‡∏ó‡∏∏‡∏Å edge: `edge_type = 'conditional'`
- Edge 1: `edge_condition = {"size": "S"}`
- Edge 2: `edge_condition = {"size": "M"}`
- Edge 3: `edge_condition = {"size": "L"}`
- Edge 4: `edge_condition = {}`, `is_default = true`

---

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 3: QC Node - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£

```
[‡πÄ‡∏¢‡πá‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à]
    ‚Üì
[QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏£‡∏≠‡∏¢‡πÄ‡∏¢‡πá‡∏ö]
    ‚îú‚îÄ [normal: ‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡∏ó‡∏≤‡∏™‡∏µ]
    ‚îî‚îÄ [rework: ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏¢‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà]

[‡∏ó‡∏≤‡∏™‡∏µ‡πÄ‡∏™‡∏£‡πá‡∏à]
    ‚Üì
[QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏µ]
    ‚îú‚îÄ [normal: ‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡πÅ‡∏û‡πá‡∏Ñ]
    ‚îî‚îÄ [rework: ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏≤‡∏™‡∏µ‡πÉ‡∏´‡∏°‡πà]
```

---

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 4: Decision Node - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå:** ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ï‡∏≤‡∏° order type

```
[‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÄ‡∏™‡∏£‡πá‡∏à]
    ‚Üì
[Decision: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á]
    ‚îú‚îÄ [conditional: order_type='rush'] ‚Üí [‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏î‡πà‡∏ß‡∏ô]
    ‚îú‚îÄ [conditional: order_type='normal'] ‚Üí [‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏õ‡∏Å‡∏ï‡∏¥]
    ‚îú‚îÄ [conditional: order_type='custom'] ‚Üí [‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏©]
    ‚îî‚îÄ [conditional: default, is_default=true] ‚Üí [‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏õ‡∏Å‡∏ï‡∏¥]
```

---

## ‚ö†Ô∏è ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á

### QC Node:
- ‚ùå **‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏ä‡πâ** ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡∏Å‡∏ó‡∏≤‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 2 ‡∏ó‡∏≤‡∏á
- ‚ùå **‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏ä‡πâ** ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ default edge
- ‚úÖ **‡πÉ‡∏ä‡πâ** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (pass/fail)

### Decision Node:
- ‚ùå **‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏ä‡πâ** ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ `normal` edge
- ‚ùå **‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏ä‡πâ** ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ default edge
- ‚úÖ **‡πÉ‡∏ä‡πâ** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡∏Å‡∏ó‡∏≤‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç

---

## üîÑ Rework Edge vs Rework Sink Node - ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á?

### ‚ùì ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°: ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Rework Sink Node ‡πÉ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ Rework Edge ‡πÅ‡∏•‡πâ‡∏ß?

### üí° ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö: ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ DAG ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏µ Cycle ‡πÑ‡∏î‡πâ!

**DAG = Directed Acyclic Graph** = ‡∏Å‡∏£‡∏≤‡∏ü‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ cycle (‡∏ß‡∏ô‡∏•‡∏π‡∏õ)

---

### üî¥ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ Rework Sink Node

**‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ Normal/Conditional Edge ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö:**

```
[‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö] ‚Üí [‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏¢‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà]
                                    ‚Üë                    ‚îÇ
                                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                          ‚ö†Ô∏è CYCLE!
```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
- ‚ùå ‡πÄ‡∏Å‡∏¥‡∏î Cycle ‚Üí DAG validation ‡∏à‡∏∞ error
- ‚ùå Token ‡∏à‡∏∞‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡πÑ‡∏õ‡∏°‡∏≤‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏à‡∏ö
- ‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ track rework ‡πÑ‡∏î‡πâ

---

### ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ: ‡πÉ‡∏ä‡πâ Rework Edge + Rework Sink Node

**‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:**

```
[‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö] ‚Üí [‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡πÅ‡∏û‡πá‡∏Ñ]
              ‚îÇ
              ‚îÇ [rework edge]
              ‚ñº
        [Rework Sink] ‚Üê ‡∏à‡∏∏‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (‡πÑ‡∏°‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö)
              ‚îÇ
              ‚îÇ (‡∏£‡∏∞‡∏ö‡∏ö spawn new token)
              ‚ñº
        [‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏¢‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà] (token ‡πÉ‡∏´‡∏°‡πà)
```

**‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ Cycle?**
- ‚úÖ Rework Edge **‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ô‡∏±‡∏ö** ‡πÉ‡∏ô cycle detection
- ‚úÖ Rework Sink Node = ‡∏à‡∏∏‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (‡πÑ‡∏°‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö)
- ‚úÖ ‡∏à‡∏≤‡∏Å Rework Sink ‚Üí ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ **spawn new token** ‡πÑ‡∏õ‡∏¢‡∏±‡∏á node ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

---

### üìä ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö

| ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ | Rework Edge | Rework Sink Node |
|-----------|-------------|------------------|
| **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£** | ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á (connection) | ‡∏à‡∏∏‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (destination) |
| **Edge Type** | `rework` | - |
| **Node Type** | - | `rework_sink` |
| **Cycle Detection** | ‚ùå ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ô‡∏±‡∏ö | ‚úÖ ‡πÑ‡∏°‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á cycle |
| **Purpose** | ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ "‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç" | ‡∏£‡∏±‡∏ö token ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á rework |
| **Runtime Behavior** | Route token ‡πÑ‡∏õ‡∏¢‡∏±‡∏á sink | Spawn new token ‡πÑ‡∏õ‡∏¢‡∏±‡∏á target node |

---

### üéØ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå:** QC ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‚Üí ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏¢‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà

**Step 1: Token ‡∏°‡∏≤‡∏ñ‡∏∂‡∏á QC Node**
```
Token ‡∏ó‡∏µ‡πà QC Node
‚îú‚îÄ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ‚Üí ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô
‚îî‚îÄ Route ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Rework Sink (via rework edge)
```

**Step 2: Token ‡πÑ‡∏õ‡∏ñ‡∏∂‡∏á Rework Sink**
```
Token ‡∏ó‡∏µ‡πà Rework Sink Node
‚îú‚îÄ ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡πà‡∏≤‡∏ô QC policy
‚îú‚îÄ ‡∏î‡∏π‡∏ß‡πà‡∏≤ rework ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà node ‡πÑ‡∏´‡∏ô (‡πÄ‡∏ä‡πà‡∏ô "‡πÄ‡∏¢‡πá‡∏ö")
‚îî‚îÄ Spawn NEW token ‡πÑ‡∏õ‡∏¢‡∏±‡∏á node "‡πÄ‡∏¢‡πá‡∏ö"
```

**Step 3: Token ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô**
```
New Token ‡∏ó‡∏µ‡πà "‡πÄ‡∏¢‡πá‡∏ö" Node
‚îú‚îÄ Token ‡πÄ‡∏î‡∏¥‡∏°‡∏ñ‡∏π‡∏Å mark ‡πÄ‡∏õ‡πá‡∏ô consumed
‚îî‚îÄ Token ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà (‡πÑ‡∏°‡πà‡∏°‡∏µ cycle!)
```

---

### üîç ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Rework Sink Node?

**1. ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Cycle**
```
‚ùå ‡πÑ‡∏°‡πà‡∏î‡∏µ: [QC] ‚Üí [rework edge] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC] ‚Üí ... (cycle!)
‚úÖ ‡∏î‡∏µ: [QC] ‚Üí [rework edge] ‚Üí [Rework Sink] ‚Üí spawn new token ‚Üí [‡πÄ‡∏¢‡πá‡∏ö]
```

**2. Track Rework**
- Rework Sink Node = ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà track rework
- ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ token ‡πÑ‡∏´‡∏ô‡∏ï‡πâ‡∏≠‡∏á rework
- ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ rework ‡πÑ‡∏õ‡∏ó‡∏µ‡πà node ‡πÑ‡∏´‡∏ô

**3. Flexible Policy**
- Rework Sink Node ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏µ policy ‡πÑ‡∏î‡πâ
- ‡πÄ‡∏ä‡πà‡∏ô: rework ‡πÑ‡∏õ‡∏ó‡∏µ‡πà node ‡πÑ‡∏´‡∏ô ‡∏ï‡∏≤‡∏° reason
- ‡πÄ‡∏ä‡πà‡∏ô: `reason_mapping = {"QC_FAIL_STITCH": "SEW", "QC_FAIL_EDGE": "EDG"}`

---

### üìù ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

**Graph Structure:**
```
[START] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏£‡∏≠‡∏¢‡πÄ‡∏¢‡πá‡∏ö]
                        ‚îú‚îÄ [normal: ‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡πÅ‡∏û‡πá‡∏Ñ] ‚Üí [END]
                        ‚îî‚îÄ [rework: ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [Rework Sink]
```

**Rework Policy (‡πÉ‡∏ô QC Node):**
```json
{
  "on_fail": "spawn_new_token",
  "target_nodes": ["‡πÄ‡∏¢‡πá‡∏ö"],
  "strategy": "by_reason",
  "reason_mapping": {
    "QC_FAIL_STITCH": "‡πÄ‡∏¢‡πá‡∏ö",
    "QC_FAIL_EDGE": "‡∏ó‡∏≤‡∏Ç‡∏≠‡∏ö"
  }
}
```

**Runtime Flow:**
1. Token ‡∏°‡∏≤‡∏ñ‡∏∂‡∏á QC ‚Üí ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô (reason: "QC_FAIL_STITCH")
2. Route ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Rework Sink (via rework edge)
3. Rework Sink ‡∏≠‡πà‡∏≤‡∏ô policy ‚Üí spawn new token ‡πÑ‡∏õ‡∏¢‡∏±‡∏á "‡πÄ‡∏¢‡πá‡∏ö"
4. Token ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà "‡πÄ‡∏¢‡πá‡∏ö" (‡πÑ‡∏°‡πà‡∏°‡∏µ cycle!)

---

### ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ

**Rework Edge:**
- ‚úÖ ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ "‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"
- ‚úÖ Edge type = `rework`
- ‚úÖ ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ô‡∏±‡∏ö‡πÉ‡∏ô cycle detection

**Rework Sink Node:**
- ‚úÖ ‡∏à‡∏∏‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö token ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á rework
- ‚úÖ Node type = `rework_sink`
- ‚úÖ ‡πÑ‡∏°‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á cycle (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)
- ‚úÖ Spawn new token ‡πÑ‡∏õ‡∏¢‡∏±‡∏á target node (‡∏ï‡∏≤‡∏° policy)

**‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á?**
- Rework Edge = ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á (‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ "‡πÑ‡∏õ‡πÑ‡∏´‡∏ô")
- Rework Sink Node = ‡∏à‡∏∏‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (‡∏£‡∏±‡∏ö token ‡πÅ‡∏•‡∏∞ spawn new token)

**‡∏™‡∏£‡∏∏‡∏õ:** ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô cycle ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ rework ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!

---

## ‚ö†Ô∏è ‡∏Å‡∏£‡∏ì‡∏µ‡∏ú‡∏¥‡∏î: ‡πÉ‡∏ä‡πâ Conditional/Normal Edge ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ Node ‡πÄ‡∏î‡∏¥‡∏°

### ‚ùå ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î

**‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î:**
```
[‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö] ‚Üí [‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡πÅ‡∏û‡πá‡∏Ñ]
              ‚îÇ
              ‚îÇ [conditional: ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô]
              ‚ñº
          [‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏¢‡πá‡∏ö] ‚Üê ‚ö†Ô∏è ‡∏ú‡∏¥‡∏î!
```

**‡∏ó‡∏≥‡πÑ‡∏°‡∏ú‡∏¥‡∏î?**
1. ‚ùå **‡∏™‡∏£‡πâ‡∏≤‡∏á Cycle** ‚Üí DAG validation ‡∏à‡∏∞ error
   ```
   [‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC] ‚Üí [‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC] ‚Üí ... (‡∏ß‡∏ô‡∏•‡∏π‡∏õ!)
   ```
2. ‚ùå **Token ‡∏à‡∏∞‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡πÑ‡∏õ‡∏°‡∏≤‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏à‡∏ö**
3. ‚ùå **‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ track rework ‡πÑ‡∏î‡πâ**
4. ‚ùå **‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ detect cycle ‡πÅ‡∏•‡∏∞ reject graph**

---

### ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

**‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:**
```
[‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö] ‚Üí [‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡πÅ‡∏û‡πá‡∏Ñ]
              ‚îÇ
              ‚îÇ [rework: ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô]
              ‚ñº
        [Rework Sink] ‚Üê ‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!
              ‚îÇ
              ‚îÇ (spawn new token)
              ‚ñº
        [‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏¢‡πá‡∏ö] (token ‡πÉ‡∏´‡∏°‡πà)
```

**‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á?**
1. ‚úÖ **‡πÑ‡∏°‡πà‡∏°‡∏µ Cycle** ‚Üí Rework edge ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ô‡∏±‡∏ö‡πÉ‡∏ô cycle detection
2. ‚úÖ **Token ‡πÑ‡∏°‡πà‡∏ß‡∏ô‡∏•‡∏π‡∏õ** ‚Üí Spawn new token ‡πÅ‡∏ó‡∏ô
3. ‚úÖ **Track rework ‡πÑ‡∏î‡πâ** ‚Üí ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ rework ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô
4. ‚úÖ **‡∏£‡∏∞‡∏ö‡∏ö validate ‡∏ú‡πà‡∏≤‡∏ô**

---

### üîç ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?

**1. Cycle Detection:**
```php
// Skip rework edges from cycle detection
if (in_array($edgeType, ['rework', 'event'], true)) {
    continue; // Don't include in adjacency list
}
```

**2. QC Fail Edge Validation:**
```php
// QC fail path must use rework edge
if ($hasFailPath && !$hasReworkEdge) {
    $errors[] = "QC node has fail path but uses non-rework edge. 
                 QC fail paths must use edge_type='rework'";
}
```

**3. Warning/Error:**
- ‚ùå **Error:** ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ `conditional`/`normal` edge ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö QC fail
- ‚úÖ **Pass:** ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ `rework` edge ‡πÑ‡∏õ‡∏¢‡∏±‡∏á `rework_sink`

---

### üìù ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

**‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ (‡∏ú‡∏¥‡∏î):**
```
[‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC] ‚Üí [conditional: ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö]
```

**‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ (‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á):**
```
[‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC] ‚Üí [rework: ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [Rework Sink]
                                    ‚Üì
                              (spawn new token)
                                    ‚Üì
                                [‡πÄ‡∏¢‡πá‡∏ö]
```

---

### ‚úÖ Checklist: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

**‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:**
- [ ] QC fail edge ‡πÄ‡∏õ‡πá‡∏ô `rework` type
- [ ] Rework edge ‡πÑ‡∏õ‡∏¢‡∏±‡∏á `rework_sink` node
- [ ] ‡πÑ‡∏°‡πà‡∏°‡∏µ cycle ‡πÉ‡∏ô graph
- [ ] Validation ‡∏ú‡πà‡∏≤‡∏ô

**‚ùå ‡∏ú‡∏¥‡∏î:**
- [ ] QC fail edge ‡πÄ‡∏õ‡πá‡∏ô `conditional`/`normal` type
- [ ] Rework edge ‡πÑ‡∏õ‡∏¢‡∏±‡∏á node ‡πÄ‡∏î‡∏¥‡∏° (‡∏Å‡πà‡∏≠‡∏ô QC)
- [ ] ‡∏°‡∏µ cycle ‡πÉ‡∏ô graph
- [ ] Validation error

---

### üí° ‡∏™‡∏£‡∏∏‡∏õ

**‚ùå ‡∏ú‡∏¥‡∏î:**
```
[‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC] ‚Üí [conditional: ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [‡πÄ‡∏¢‡πá‡∏ö]
```
- ‡∏™‡∏£‡πâ‡∏≤‡∏á cycle
- Token ‡∏ß‡∏ô‡∏•‡∏π‡∏õ
- Validation error

**‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:**
```
[‡πÄ‡∏¢‡πá‡∏ö] ‚Üí [QC] ‚Üí [rework: ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô] ‚Üí [Rework Sink] ‚Üí spawn new token ‚Üí [‡πÄ‡∏¢‡πá‡∏ö]
```
- ‡πÑ‡∏°‡πà‡∏°‡∏µ cycle
- Spawn new token
- Validation ‡∏ú‡πà‡∏≤‡∏ô

**‡∏Å‡∏é‡∏ó‡∏≠‡∏á:**
> **QC fail edge ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô `rework` type ‡πÅ‡∏•‡∏∞‡πÑ‡∏õ‡∏¢‡∏±‡∏á `rework_sink` node ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô!**

---

## üìä ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö

| ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ | QC Node | Decision Node |
|-----------|---------|---------------|
| **Database Storage** | `operation` (‡∏ï‡πâ‡∏≠‡∏á map ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô `qc`) | `decision` (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á map) |
| **Purpose** | Quality control check (pass/fail) | Conditional branching (if/then) |
| **Form Schema** | ‚úÖ ‡∏°‡∏µ `form_schema_json` (optional) | ‚úÖ ‡∏°‡∏µ `form_schema_json` (optional) |
| **Outgoing Edges** | ‚â•2 edges (pass/fail) | ‚â•2 edges (required) |
| **Pass Edge Type** | `normal` ‡∏´‡∏£‡∏∑‡∏≠ `conditional` | `conditional` ‡∏´‡∏£‡∏∑‡∏≠ `rework` |
| **Fail Edge Type** | `rework` (required) | `conditional` ‡∏´‡∏£‡∏∑‡∏≠ `rework` |
| **Normal Edges** | ‚úÖ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏µ‡πÑ‡∏î‡πâ | ‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏µ‡πÑ‡∏î‡πâ |
| **Default Edge** | ‚ùå ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô | ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ (`is_default=true`) |
| **Validation Rules** | ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ `qc_policy` | ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ conditional edges + default |
| **Runtime Behavior** | Fail ‚Üí rework (loop back) | Conditional routing ‡∏ï‡∏≤‡∏° condition |

---

## üîç ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô

### 1. **Form Schema**
- ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏°‡∏µ `form_schema_json` (optional)
- ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏°‡∏µ `needsForm = true` ‡πÉ‡∏ô node capabilities
- ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö form schema ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö UI

### 2. **Conditional Routing**
- ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö conditional routing
- ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ ‚â•2 outgoing edges
- ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡πÉ‡∏ä‡πâ `edge_condition` JSON ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö routing logic

### 3. **Edge Types**
- ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö `conditional` ‡πÅ‡∏•‡∏∞ `rework` edges
- ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡πÉ‡∏ä‡πâ `edge_condition` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö conditional edges

---

## ‚ö†Ô∏è ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á

### 1. **Database Storage**

**QC Node:**
```php
// Save: ‡πÅ‡∏õ‡∏•‡∏á 'qc' ‚Üí 'operation'
$nodeTypeMap = [
    'qc' => 'operation',  // QC nodes ‚Üí operation
];

// Load: ‡πÅ‡∏õ‡∏•‡∏á 'operation' ‚Üí 'qc' (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ form_schema_json)
if ($node['node_type'] === 'operation') {
    if (!empty($node['form_schema_json']) && empty($node['subgraph_ref_id'])) {
        $node['node_type'] = 'qc';
    }
}
```

**Decision Node:**
```php
// Save: ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏õ‡∏•‡∏á (‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô 'decision')
// Load: ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏õ‡∏•‡∏á (‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô 'decision')
```

### 2. **Edge Type Rules**

**QC Node:**
- ‚úÖ Pass edge: ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡πá‡∏ô `normal` ‡∏´‡∏£‡∏∑‡∏≠ `conditional` ‡πÑ‡∏î‡πâ
- ‚úÖ Fail edge: ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô `rework` (‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡πá‡∏ô `conditional` ‡πÑ‡∏î‡πâ)
- ‚úÖ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏µ `normal` outgoing edges ‡πÑ‡∏î‡πâ

**Decision Node:**
- ‚ùå Pass edge: ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô `conditional` ‡∏´‡∏£‡∏∑‡∏≠ `rework` (‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡πá‡∏ô `normal` ‡πÑ‡∏î‡πâ)
- ‚úÖ Fail edge: ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡πá‡∏ô `conditional` ‡∏´‡∏£‡∏∑‡∏≠ `rework` ‡πÑ‡∏î‡πâ
- ‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏µ `normal` outgoing edges ‡πÑ‡∏î‡πâ

### 3. **Default Edge Requirement**

**QC Node:**
- ‚ùå ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ default edge
- Edge routing ‡πÉ‡∏ä‡πâ `edge_condition` ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

**Decision Node:**
- ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ default edge (`is_default=true`)
- ‡πÉ‡∏ä‡πâ default edge ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ condition match

### 4. **Validation Rules**

**QC Node:**
```php
case 'qc':
    // QC nodes MUST have qc_policy
    if (empty($node['qc_policy'])) {
        $errors[] = [
            'code' => 'DAG.E011',
            'rule' => 'QC_POLICY_REQUIRED',
            'message' => "QC node '{$nodeCode}' must have qc_policy defined",
        ];
    }
    break;
```

**Decision Node:**
```php
// Decision nodes must have:
// 1. ‚â•2 outgoing edges
// 2. All edges must be conditional or rework (no normal edges)
// 3. Must have 1 default edge (is_default=true)
// 4. Must have at least one conditional edge
```

### 5. **Runtime Behavior**

**QC Node:**
- Fail edge ‚Üí `rework` type ‚Üí loop back to rework sink
- Pass edge ‚Üí continue to next operation
- ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö quality control check

**Decision Node:**
- Conditional routing ‚Üí evaluate `edge_condition` ‚Üí route to matching edge
- Default edge ‚Üí fallback when no condition matches
- ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö general conditional branching

---

## üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥

### ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ QC Node?
- ‚úÖ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ quality control check
- ‚úÖ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ fail edge ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô rework (loop back)
- ‚úÖ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ pass edge ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡πá‡∏ô `normal` ‡πÑ‡∏î‡πâ
- ‚úÖ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ default edge

### ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ Decision Node?
- ‚úÖ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ general conditional branching
- ‚úÖ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏∏‡∏Å outgoing edge ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô `conditional` ‡∏´‡∏£‡∏∑‡∏≠ `rework`
- ‚úÖ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ default edge ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö fallback
- ‚úÖ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ strict validation (no normal edges)

---

## üîß Implementation Notes

### Current Implementation Issues

1. **QC Node Storage:**
   - ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô `operation` ‡πÉ‡∏ô database
   - ‡∏ï‡πâ‡∏≠‡∏á map ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô `qc` ‡πÄ‡∏°‡∏∑‡πà‡∏≠ load
   - ‡πÉ‡∏ä‡πâ `original_node_type` ‡πÉ‡∏ô `node_params` ‡πÄ‡∏û‡∏∑‡πà‡∏≠ restore

2. **Decision Node Storage:**
   - ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô `decision` ‡πÉ‡∏ô database
   - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á map (‡∏ï‡∏£‡∏á‡πÑ‡∏õ‡∏ï‡∏£‡∏á‡∏°‡∏≤)

3. **Validation:**
   - QC: ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ `qc_policy` (‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà implement ‡πÉ‡∏ô save)
   - Decision: ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ conditional edges + default edge

---

## üìù Recommendations

### 1. **Unify Storage (Optional)**
- ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÄ‡∏Å‡πá‡∏ö QC ‡πÄ‡∏õ‡πá‡∏ô `qc` type ‡πÉ‡∏ô database (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á map)
- ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç database schema (‡πÄ‡∏û‡∏¥‡πà‡∏° 'qc' ‡πÉ‡∏ô ENUM)

### 2. **Clarify Use Cases**
- QC: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö quality control (pass/fail with rework)
- Decision: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö general conditional branching (if/then with default)

### 3. **Validation Consistency**
- QC: ‡πÄ‡∏û‡∏¥‡πà‡∏° validation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö `qc_policy` ‡πÉ‡∏ô save
- Decision: ‡πÄ‡∏û‡∏¥‡πà‡∏° validation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö default edge ‡πÉ‡∏ô save

---

## ‚úÖ Conclusion

**QC ‡πÅ‡∏•‡∏∞ Decision nodes ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡πÉ‡∏ô:**
- Form schema support
- Conditional routing capability
- Edge condition support

**‡πÅ‡∏ï‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏ô:**
- Database storage (QC = operation, Decision = decision)
- Edge type rules (QC ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏µ normal edges, Decision ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ)
- Default edge requirement (Decision ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ, QC ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ)
- Validation rules (QC ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ qc_policy, Decision ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ default edge)
- Runtime behavior (QC = quality check, Decision = conditional branching)

**‡∏™‡∏£‡∏∏‡∏õ:** ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏°‡∏µ logic ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Å‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏°‡∏µ use cases ‡πÅ‡∏•‡∏∞ validation rules ‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô

